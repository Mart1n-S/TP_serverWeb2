<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Connexion DonSecure</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light d-flex align-items-center vh-100">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-4">
                <div class="card shadow-lg">
                    <div class="card-body">
                        <h2 class="card-title text-center mb-4">üîê Connexion DonSecure</h2>
                        <p class="text-center">Veuillez entrer vos identifiants :</p>

                        <!-- Identifiants de test -->
                        <div class="alert alert-info text-center small">
                            <strong>üîë Identifiants de test :</strong><br>
                            Pseudo : <code>Martin</code> <br>
                            Mot de passe : <code>123456</code>
                        </div>

                        <!-- Message d'erreur -->
                        <div id="errorAlert" class="alert alert-danger d-none" role="alert"></div>

                        <!-- Formulaire -->
                        <form action="/generate_token.php" method="POST">
                            <div class="mb-3">
                                <label for="pseudo" class="form-label">Pseudo :</label>
                                <input type="text" name="pseudo" id="pseudo" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="motdepasse" class="form-label">Mot de passe :</label>
                                <input type="password" name="motdepasse" id="motdepasse" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Se connecter</button>
                        </form>
                    </div>
                </div>

                <p class="text-center mt-3 text-muted">¬© DonSecure 2025</p>
            </div>
        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const error = params.get("error");
        const alert = document.getElementById("errorAlert");

        if (error) {
            alert.classList.remove("d-none");

            switch (error) {
                case "1":
                    alert.textContent = "‚ùå Identifiants incorrects.";
                    break;
                case "missing":
                    alert.textContent = "‚ùå Pseudo ou mot de passe manquant.";
                    break;
                case "method":
                    alert.textContent = "‚ùå M√©thode HTTP non autoris√©e.";
                    break;
                case "server":
                    alert.textContent = "‚ùå Erreur interne du serveur. Veuillez r√©essayer.";
                    break;
                default:
                    alert.textContent = "‚ùå Une erreur inconnue est survenue.";
            }
        }
    </script>
</body>

</html>